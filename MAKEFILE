OBJECTS = pmode.o brmsx.o debug.o patch.o \
	  io.o saveload.o gui.o blit.o psg.o vdp.o drive.o \
	  serial.o mouse.o pentium.o vesa.o joystick.o winsock.o \
	  z80core.o z80.o z80sing.o z80cb.o z80dd.o z80ed.o z80fd.o \
	  print.o printcb.o printdd.o printfd.o
TASM = tasm
TASMFLAGS = /ml /m2 /q /la
ECHO = rbecho

all : rbecho.exe brmsx.exe

rbecho.exe: rbecho.c
	gcc $^ -o $@ 

brmsx.exe : $(OBJECTS)
	$(ECHO) objects.lst $^
	tlink /3 /x @objects.lst , $@

%.o : %.asm
	$(TASM) $(TASMFLAGS) $^,$@

clean :
	del *.o
	del *.exe
	del *.lst
	del cart1.rom
	del brmsx.sta
